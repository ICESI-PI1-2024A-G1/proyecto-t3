{% extends 'base.html' %} {% block content %}

<head>
  {% load static %}
  <script src="{% static 'js/materia.js' %}"></script>
  <script src="{% static 'js/popup.js' %}"></script>
  <script src="{% static 'https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js' %}"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="{% static 'vendor/chart.js/Chart.js' %}"></script>
  <script src="{% static 'vendor/chart.js/Chart.min.js' %}"></script>
</head>
<div class="container" style="text-align: start;">
  <h2 class="mt-2"><strong>{{ materia.nombre }}:</strong> {{ materia.codigo }}</h2>

  <div class="row">
      <label class="col ml-3" style="text-align: start;"><strong>Departamento:</strong> {{ materia.departamento.nombre }}</label>
      <label class="col ml-3" style="text-align: start;"><strong>Creditos:</strong> {{ materia.creditos }}</label>
      
  </div>
  <div class="row">
    <label class="col ml-3" style="text-align: start;"><strong>Tipo:</strong> {{ materia.nombre }}</label>
    <label class="col ml-3" style="text-align: start;"><strong># de Cursos Totales:</strong> {{ c_numT }}</label>
  </div>

  <!-- Tabla de cursos -->
  <div class="block card card-body mt-3 inner-shadow">
    <div class="form-inline">
      <div class="col">
        <strong>Cursos</strong>
      </div>
      <div class="justify-content-end">
        Periodo selecionado:
        <select class="custom-select mr-2" id="periodo" onchange="cambiar_periodo()">
              {% for periodo in periodos %} 
              {% if periodo_seleccionado == periodo.semestre %}
          <option value="{{materia.codigo}}/{{ periodo.semestre }}" selected="true">{{ periodo.semestre }}</option>
          {% else %}
          <option value="{{materia.codigo}}/{{ periodo.semestre }}">{{ periodo.semestre }}</option>
          {% endif %} 
          {% endfor %}
        </select>
      </div>
    </div>

    <div class="block card card-body mt-3 inner-shadow">
      <div class="mt-2">
    
      <div class="pd-1 row align-items-center">
        <div class="frame m-2 justify-content-center" style="background-color: rgba(120, 120, 120, 0.773);"><strong style="width: 25px;"> {{c_num}}</strong></div>
          {% for curso in cursos %} 
          <div id="{{curso.nrc}}" class="color-{{cursos.color}} frame m-2 btn outer-shadow" onclick="window.location.href='/academico/cursos/{{curso.nrc}}/visualizar-curso'" style="width: 100px;">
            <div class="div">
              <span class="text-wrapper span"> NRC: {{curso.nrc}}</span>
              <span class="text-wrapper span"> Grupo:{{curso.grupo}}</span>
              <span class="text-wrapper span"> Cupos:{{curso.cupo}}</span>
              <div class="col-sm-6">
                <canvas id="myChart" width="50" height="50"></canvas>
                <script>
                  var ctx = document.getElementById('myChart');
                  var myChart = new Chart(ctx, {
                    type: 'pie',
                    data: {
                      labels: ["Sin docente", "Con docente"],
                      datasets: [{
                        label: 'Clases Asignadas',
                        data: ['{{total_asignados}}', '{{total_clases}}'],
                        backgroundColor: ['rgba(255,99,132,1)', 'rgba(54,162,135,1)'],
                        borderColor: ['rgba(54,162,135,1)', 'rgba(25,206,86,1)'],
                        borderWidth: 1
                      }]
                    },
                    options: {
                      scales: {
                        yAxes: [{
                          ticks: {
                            beginAtZero: true
                          }
                        }]
                      }
                    }
                  });
                </script>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
    <a class="btn btn-primary mt-2"  onclick="show()">Nuevo curso<img class="icon" src="{% static 'img/add.webp' %}"></a>
    {% include 'crear-curso.html' %}
  </div>
</div>
</div class="row">

  {% endblock %}

</div>